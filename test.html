<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설문조사</title>
    <style>
        body{font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;height:auto;margin:0;padding:20px 0}.survey-container{width:80%;max-width:600px;border:1px solid #ccc;border-radius:10px;padding:20px;box-shadow:0 4px 8px rgba(0,0,0,0.1)}.survey-container h1{text-align:center}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:8px}.form-group input,.form-group textarea{width:100%;padding:8px;box-sizing:border-box}.submit-btn{width:100%;padding:12px;background-color:#4CAF50;color:white;border:none;border-radius:5px;font-size:16px;cursor:pointer}.submit-btn:hover{background-color:#45a049}.error-message{color:red;text-align:center;margin-top:20px}
    </style>
</head>
<body>
    <div class="survey-container">
        <h1>설문조사</h1>
        <form id="surveyForm">
            <div class="form-group"><label for="nickname">닉네임:</label><input type="text" id="nickname" name="nickname" required></div>
            <div class="form-group"><label for="discordId">디스코드 아이디:</label><input type="text" id="discordId" name="discordId" required></div>
            <div class="form-group"><label for="name">이름(본명):</label><input type="text" id="name" name="name" required></div>
            <div class="form-group"><label for="age">나이:</label><input type="number" id="age" name="age" required></div>
            <div class="form-group"><label for="heightWeight">키 / 몸무게 / 젖탱이 크기:</label><input type="text" id="heightWeight" name="heightWeight" required></div>
            <div class="form-group"><label for="frequency">하루 또는 일주일 자위횟수:</label><input type="text" id="frequency" name="frequency" required></div>
            <div class="form-group"><label for="photo">사진 (보지와 종이에 닉네임 적어서 같이 찍어서 보내주세요):</label><input type="file" id="photo" name="photo" required></div>
            <div class="form-group"><label for="developPart">개발하고 싶은 부위 (애널, 유두, 클리):</label><input type="text" id="developPart" name="developPart" required></div>
            <div class="form-group"><label for="playPreference">원하는 플레이나 하고 싶은 것 (생활관리, 도그플, 야외노출(야노), 등):</label><textarea id="playPreference" name="playPreference" rows="3" required></textarea></div>
            <div class="form-group"><label for="determination">노예로써 각오:</label><textarea id="determination" name="determination" rows="3" required></textarea></div>
            <div class="form-group"><label for="phone">전번 (하드):</label><input type="text" id="phone" name="phone"></div>
            <div class="form-group"><label for="location">사는 곳 (하드):</label><input type="text" id="location" name="location"></div>
            <div class="form-group"><label for="instagram">인스타 (하드):</label><input type="text" id="instagram" name="instagram"></div>
            <button type="submit" class="submit-btn">제출</button>
            <div class="error-message" id="errorMessage" style="color: red; text-align: center; margin-top: 20px;"></div>
        </form>
    </div>

    <script>
        const a = localStorage.getItem('lastSubmitTime'), b = (new Date).getTime(), c = 3600000;
        if (a && (b - a < c)) {
            document.querySelector('.submit-btn').disabled = true;
            const d = (c - (b - a)) / 1000, e = Math.floor(d / 60), f = Math.floor(d % 60);
            document.getElementById('errorMessage').textContent = `다음 제출은 ${e}분 ${f}초 후에 가능합니다.`;
        }
        document.getElementById('surveyForm').onsubmit = async function(g) {
            g.preventDefault();
            if (a && (b - a < c)) {
                const d = (c - (b - a)) / 1000, e = Math.floor(d / 60), f = Math.floor(d % 60);
                document.getElementById('errorMessage').textContent = `다음 제출은 ${e}분 ${f}초 후에 가능합니다.`;
                return;
            }
            const h = 'https://discord.com/api/webhooks/1324314281411346503/KH0UKy1Y9UJoB5mTi7FzL-BQZ25px2awj_5FVZzNms4175Ibd6M0zST2UQZVsdk5kucY',
                i = new FormData(g.target), j = [];
            i.forEach((k, l) => {
                j.push({name: l, value: k || 'N/A', inline: false});
            });
            const m = {
                username: 'Survey Bot',
                embeds: [{
                    title: '설문조사 결과',
                    fields: j,
                    color: 3447003,
                    timestamp: new Date
                }]
            };
            try {
                const n = await fetch(h, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(m)
                });
                if (n.ok) {
                    localStorage.setItem('lastSubmitTime', (new Date).getTime());
                    document.getElementById('errorMessage').textContent = '설문이 성공적으로 제출되었습니다!';
                    g.target.reset();
                } else if (n.status === 429) {
                    document.getElementById('errorMessage').textContent = '전송 속도 제한에 걸렸습니다. 잠시 후 다시 시도해주세요.';
                } else {
                    document.getElementById('errorMessage').textContent = '설문 제출에 실패했습니다.';
                }
            } catch (o) {
                console.error('Error:', o);
                document.getElementById('errorMessage').textContent = '오류가 발생했습니다. 다시 시도해주세요.';
            }
        };
    </script>
</body>
</html>
